<!-- <p>broadcaster works!</p> -->

<div class="broadcaster-container">
  <div class="header">
      <h2>Live Streaming: {{ room?.name }}</h2>
      <button class="back-button" (click)="goToHome()">Back to home</button>
  </div>

  <div class="error-message" *ngIf="errorMessage">
      {{ errorMessage }}
  </div>

  <div class="video-container">
      <video #videoElement autoplay muted playsinline></video>

      <div class="controls">
          <button *ngIf="!isStreaming" class="start-button" (click)="startStreaming()">
            Start broadcasting
          </button>
          <button *ngIf="isStreaming" class="stop-button" (click)="stopStreaming()">
            Stop broadcasting
          </button>
      </div>

      <div *ngIf="isStreaming" class="streaming-indicator">
          <span class="dot"></span> Live
      </div>
  </div>

  <div class="stream-info" *ngIf="room">
      <h3>Stream information</h3>
      <p><strong>Room ID:</strong> {{ roomId }}</p>
      <p><strong>Name:</strong> {{ room.name }}</p>
      <p><strong>Status:</strong> {{ isStreaming ? 'En direct' : 'Pas en diffusion' }}</p>
      <p *ngIf="room.recordingPath"><strong>Registration:</strong> {{ room.recordingPath }}</p>
  </div>

  <div class="share-info" *ngIf="isStreaming">
      <h3>Share this stream</h3>
      <p>Share this link so others can watch your stream:</p>
      <div class="share-link">
          <code>{{ window.location.origin }}/view/{{ roomId }}</code>
      </div>
  </div>
</div>

